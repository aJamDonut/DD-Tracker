{
    "name": "Settings Dialog",
    "codename": "settings_dialog",
    "value": "0",
    "quantity": "0",
    "credits_shop_item": "0",
    "type": "component_widgets",
    "color": "#202327",
    "editedtime": "1676744316",
    "vars": {
        "getElement": "function(options) {\r\n\r\n    if (!options) {\r\n        options = {\r\n            settings: ['none'],\r\n            callerObject: new LifeObject()\r\n        }\r\n    }\r\n\r\n    console.log(\"Get settings for \" + options.callerObject.id);\r\n    console.log(options, options.callerObject);\r\n\r\n    let rows = Object.keys(options.settings).length;\r\n    let w = 500;\r\n    let pane = game.render.componentRaw('drawBoxPane', { moveable: true, showX: true, name: 'test', callerObject: options.callerObject, title: 'Settings', x: 10, y: 10, w: w, h: 500 });\r\n\r\n    let pageItems = [];\r\n\r\n\r\n\r\n    for (let i = 0; i < options.settings.length; i++) {\r\n        let pageItem = new UIContainer();\r\n        pageItems.push(pageItem);\r\n        let settingName = options.settings[i];\r\n        let settingValue = options.callerObject[settingName];\r\n        \r\n        if (options.callerObject.data && options.callerObject.data[settingName]) {\r\n            settingValue = options.callerObject.data[settingName];\r\n        }\r\n\r\n        const callerObject = options.callerObject;\r\n\r\n        let label = game.render.componentRaw(\"editableLabel\", {\r\n            showX: true,\r\n            name: settingName,\r\n            value: settingValue,\r\n            callerObject: options.callerObject,\r\n            title: \"Settings\",\r\n            x: 0,\r\n            y: 0,\r\n            w: w - 50,\r\n            h: 50,\r\n            onChange: (newValue) => {\r\n\r\n                if (newValue === 'true') {\r\n                    newValue = true;\r\n                }\r\n                if (newValue === 'false') {\r\n                    newValue = false;\r\n                }\r\n                if (callerObject.data[settingName]) {\r\n                    \/\/If it exists on data, set it there\r\n                    console.log(\"Set on data: \", typeof newValue, newValue);\r\n                    callerObject.data[settingName] = newValue;\r\n                } else {\r\n                    if (callerObject[settingName]) {\r\n                        console.log(\"Set on root: \", typeof newValue, newValue);\r\n                        \/\/If it doesnt exist on data, but exists on root, set it on root.\r\n                        callerObject[settingName] = newValue;\r\n                    } else {\r\n                        console.log(\"Set on data2: \", typeof newValue, newValue);\r\n                        \/\/It it doesn't exist on root or data, set it on data (goes into save file)\r\n                        callerObject.data[settingName] = newValue;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        pageItem.addChild(label);\r\n\r\n\r\n    }\r\n\r\n    let pager = game.render.componentRaw('pager', { items: pageItems, height: 350, width: 450 });\r\n\r\n    pager.x = 35;\r\n    pager.y = 100;\r\n    pane.addChild(pager);\r\n    return pane;\r\n\r\n}"
    }
}