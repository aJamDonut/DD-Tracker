{
    "name": "Player card",
    "codename": "hud_player_card",
    "value": "0",
    "quantity": "0",
    "credits_shop_item": "0",
    "type": "component_widgets",
    "color": "",
    "editedtime": null,
    "vars": {
        "options": "'player'",
        "getElement": "function (options) {\r\n    if (!options) {\r\n        options = {};\r\n    }\r\n    if (options.player) {\r\n        var isPlayerPawn = true;\r\n        options.player = game.p;\r\n    } else {\r\n        var isPlayerPawn = false;\r\n        options.player = game.watching || new LifeObject();\r\n    }\r\n\r\n    var w = 500;\r\n    var h = 225;\r\n    var statsXOffset = 235;\r\n    var buttonsXOffset = 5;\r\n    var statsYOffset = 15;\r\n    var statSpace = 25;\r\n\r\n    var offsetX = 20;\r\n    var offsetY = 15;\r\n    var hasPlayer = true;\r\n    var pane = game.render.componentRaw('drawBoxPane', { showX: game.editMode, name: 'test', callerObject: options.player, x: 0, y: 0, w: w, h: h });\r\n\r\n    if (!options.player || options.player.class !== 'LifeObject') {\r\n        hasPlayer = options.player;\r\n        \/\/return pane; \/\/Just return blank if this is wrong\r\n    }\r\n\r\n    if (hasPlayer) {\r\n        let npcName = options.player.data.name || 'Citizen';\r\n\r\n        if (options.player.data.bounty && options.player.data.bounty > 0) {\r\n            let bounty = game.render.componentRaw('drawLabel', { name: 'Bounty', value: options.player.data.bounty, h: 32 });\r\n            bounty.y -= 32;\r\n            bounty.x = pane.width - bounty.width;\r\n            pane.addChild(bounty);\r\n        }\r\n\r\n        var name = game.render.text(npcName, 'ui-title');\r\n        name.x = offsetX;\r\n        name.y = offsetY;\r\n        offsetY += 35;\r\n        pane.addChild(name);\r\n\r\n        var stat = new TickerContainer(options.player, function () {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('statBar', { callerObject: options.player, valueKey: 'hp', w: 200, h: 30, name: 'Health', maxValue: 100, value: this.ref.data.stats.hp < 0 ? 0 : Math.floor(this.ref.data.stats.hp), fill: 0x990000 });\r\n            this.addChild(this.stat);\r\n        }, 0.5);\r\n        stat.x = offsetX;\r\n        stat.y = offsetY;\r\n        pane.addChild(stat);\r\n        offsetY += 30 + 5;\r\n\r\n        var stat = new TickerContainer(options.player, function (player) {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('statBar', { callerObject: player, valueKey: 'torp', w: 200, h: 30, name: 'Torpor', maxValue: player.data.levels.toughness.level * 10, value: player.data.stats.torp < 0 ? 0 : Math.floor(player.data.stats.torp), fill: 0x990000 });\r\n            this.addChild(this.stat);\r\n        }, 0.5);\r\n        stat.x = offsetX;\r\n        stat.y = offsetY;\r\n        offsetY += 40;\r\n        pane.addChild(stat);\r\n\r\n      \tlet bounty = options.player.data.bounty || 0;\r\n        var name = game.render.text('Bounty: '+bounty, 'ingame-label');\r\n        name.x = offsetX;\r\n        name.y = offsetY;\r\n        offsetY += 20;\r\n        pane.addChild(name);\r\n\r\n        var name = game.render.text('Faction: '+options.player.data.faction, 'ingame-label');\r\n        name.x = offsetX;\r\n        name.y = offsetY;\r\n        offsetY += 35;\r\n        pane.addChild(name);\r\n\r\n        var stat = new TickerContainer(options.player, function () {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('drawLabel', { name: 'Savage', value: this.ref.data.levels.savage.level, h: 32 });\r\n            this.addChild(this.stat);\r\n        }, 5);\r\n        stat.x = statsXOffset;\r\n        stat.y = statsYOffset;\r\n        statsYOffset += statSpace;\r\n        pane.addChild(stat);\r\n\r\n\r\n        var stat = new TickerContainer(options.player, function () {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('drawLabel', { name: 'Melee', value: this.ref.data.levels.melee.level, h: 32 });\r\n            this.addChild(this.stat);\r\n        }, 5);\r\n        stat.x = statsXOffset;\r\n        stat.y = statsYOffset;\r\n        statsYOffset += statSpace;\r\n        pane.addChild(stat);\r\n\r\n        var stat = new TickerContainer(options.player, function () {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('drawLabel', { name: 'Athletics', value: this.ref.data.levels.athletics.level, h: 32 });\r\n            this.addChild(this.stat);\r\n        }, 5);\r\n        stat.x = statsXOffset;\r\n        stat.y = statsYOffset;\r\n        statsYOffset += statSpace;\r\n        pane.addChild(stat);\r\n\r\n        var stat = new TickerContainer(options.player, function () {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('drawLabel', { name: 'Ranged', value: this.ref.data.levels.ranged.level, h: 32 });\r\n            this.addChild(this.stat);\r\n        }, 5);\r\n        stat.x = statsXOffset;\r\n        stat.y = statsYOffset;\r\n        statsYOffset += statSpace;\r\n        pane.addChild(stat);\r\n\r\n        var stat = new TickerContainer(options.player, function () {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('drawLabel', { name: 'Toughness', value: this.ref.data.levels.toughness.level, h: 32 });\r\n            this.addChild(this.stat);\r\n        }, 5);\r\n        stat.x = statsXOffset;\r\n        stat.y = statsYOffset;\r\n        statsYOffset += statSpace;\r\n        pane.addChild(stat);\r\n\r\n        var stat = new TickerContainer(options.player, function () {\r\n            if (this.stat) {\r\n                this.stat.destroy();\r\n            }\r\n            this.stat = game.render.componentRaw('drawLabel', { name: 'Strength', value: this.ref.data.levels.strength.level, h: 32 });\r\n            this.addChild(this.stat);\r\n        }, 5);\r\n        stat.x = statsXOffset;\r\n        stat.y = statsYOffset;\r\n        statsYOffset += statSpace;\r\n        pane.addChild(stat);\r\n    }\r\n\r\n    if (!hasPlayer) {\r\n        statsYOffset += 200 - 50;\r\n    }\r\n\r\n\r\n    \/*if(game.p.id !== options.player.id) {\r\n  \r\n                  var hudButton = game.render.componentRaw('hud_button', {name: 'Close', w: 120});\r\n                  hudButton.x = 130+120+120+5;\r\n                  hudButton.y = statsYOffset+15;\r\n                  pane.addChild(hudButton);\r\n                  pane.noClickThrough();\r\n                  hudButton.isInteractive();\r\n                  hudButton.on('pointerup', function(){\r\n                      game.watching = false;\r\n                  });\r\n  \r\n                  return pane;\r\n              }*\/\r\n\r\n    statsYOffset += 15;\r\n\r\n    if (isPlayerPawn) {\r\n        var hudButton = game.render.componentRaw('hud_button', { name: 'Inventory', w: 130 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n            game.p.showInventory();\r\n        });\r\n\r\n        var hudButton = game.render.componentRaw('hud_button', { name: 'Craft', w: 120 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n\r\n\r\n            var crafting = game.render.component('hud_crafting', { crafter: game.p }, 'craft' + game.p.id);\r\n            crafting.x = 20;\r\n            crafting.y = 20;\r\n            game.render.aboveAll.addChild(crafting);\r\n        });\r\n\r\n        var hudButton = game.render.componentRaw('hud_button', { name: 'Stats', w: 120 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n            var stats = game.render.component('hud_stats', { player: game.p }, 'stats' + game.p.id);\r\n            stats.x = 20;\r\n            stats.y = 20;\r\n            game.render.aboveAll.addChild(stats);\r\n        });\r\n\r\n        var hudButton = game.render.componentRaw('hud_button', { name: 'Map', w: 120 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        pane.noClickThrough();\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n\r\n            var stats = game.render.component('hud_map', {}, 'map');\r\n            stats.x = 20;\r\n            stats.y = 20;\r\n            game.render.aboveAll.addChild(stats);\r\n\r\n        });\r\n    }\r\n\r\n    if (!isPlayerPawn) {\r\n        var hudButton = game.render.componentRaw('hud_button', { name: 'Build', w: 130 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n            game.setBuildMode();\r\n        });\r\n\r\n        var hudButton = game.render.componentRaw('hud_button', { name: ' ', w: 120 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n\r\n        });\r\n\r\n        var hudButton = game.render.componentRaw('hud_button', { name: ' ', w: 120 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n        });\r\n\r\n        var hudButton = game.render.componentRaw('hud_button', { name: 'Menu', w: 120 });\r\n        hudButton.x = buttonsXOffset;\r\n        hudButton.y = statsYOffset;\r\n        buttonsXOffset += hudButton.width;\r\n        pane.addChild(hudButton);\r\n        pane.noClickThrough();\r\n        hudButton.isInteractive();\r\n        hudButton.on('pointerup', function () {\r\n\r\n           game.render.aboveAll.addChild(game.render.component('frontMenu', {\r\n      close: true\r\n    }, 'frontMenu'));\r\n\r\n        });\r\n    }\r\n\r\n    return pane;\r\n}"
    }
}